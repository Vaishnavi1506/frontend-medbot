{"ast":null,"code":"// src/components/Login.js\nimport axios from\"axios\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{login}from\"../authService\";// Your custom login logic\nimport'./Login.css';// Your custom CSS file\nimport logo from'../components/logo.png';// Path to your logo image\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const[showPassword,setShowPassword]=useState(false);const[loading,setLoading]=useState(false);// Loading state\nconst navigate=useNavigate();const handleLogin=async event=>{event.preventDefault();setError(\"\");setLoading(true);// Set loading to true when login starts\ntry{await login(email,password);// Assuming login is successful\n// Call subscription check endpoint after successful login\nconst response=await axios.post('https://servermed-e9e8eubkhrbedcda.eastus2-01.azurewebsites.net/check-subscription',{email});console.log(\"Subscription check response:\",response.data);// Debugging line\nif(response.data.subscribed){navigate('/chatbot');// Redirect to chat if subscription exists\n}else{navigate('/subscription');// Redirect to subscription screen if not subscribed\n}}catch(error){console.error(\"Login or subscription check failed:\",error);// Debugging line\nif(error.response&&error.response.status===400){setError('Email is required.');}else if(error.response&&error.response.status===500){setError('An internal server error occurred.');}else{setError('An error occurred: '+error.message);}}finally{setLoading(false);// Set loading to false when login completes\n}};const handleKeyDown=e=>{if(e.key==='Enter'){e.preventDefault();// Prevent default form submission\nhandleLogin(e);// Call handleLogin manually\n}};const handleForgotPasswordClick=()=>{navigate(\"/forgot-password\");// Navigate to Forgot Password page\n};const handleSubscribeNowClick=()=>{navigate('/subscription');// Navigate to subscription page\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"logo-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"Logo\",className:\"logo\"}),\" \"]}),/*#__PURE__*/_jsx(\"h1\",{className:\"header\",children:\"Sign in\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"login-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"Email\",required:true,\"aria-label\":\"Email\",className:\"form-input\",onKeyDown:handleKeyDown// Handle Enter key for this field\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-container\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:showPassword?\"text\":\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Password\",required:true,\"aria-label\":\"Password\",className:\"form-input\",onKeyDown:handleKeyDown// Handle Enter key for this field\n}),/*#__PURE__*/_jsx(\"span\",{className:\"password-toggle-icon\",onClick:()=>setShowPassword(!showPassword),\"aria-label\":showPassword?\"Hide password\":\"Show password\",children:showPassword?'👁️':'👁️‍🗨️'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-options\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"remember-me\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\"}),\"Remember me\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"forgot-password-link\",onClick:handleForgotPasswordClick// Handle Forgot Password click\n,children:\"Forgot password?\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"login-button\",disabled:loading,children:[loading?\"Signing in...\":\"Sign in\",\" \"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"subscribe-now-button\",onClick:handleSubscribeNowClick,children:\"Subscribe Now\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"signup-link\",children:[\"Don\\u2019t have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\"Sign up\"}),\" \"]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error})]})]});};export default Login;","map":{"version":3,"names":["axios","React","useState","useNavigate","login","logo","jsx","_jsx","jsxs","_jsxs","Login","email","setEmail","password","setPassword","error","setError","showPassword","setShowPassword","loading","setLoading","navigate","handleLogin","event","preventDefault","response","post","console","log","data","subscribed","status","message","handleKeyDown","e","key","handleForgotPasswordClick","handleSubscribeNowClick","className","children","src","alt","onSubmit","htmlFor","id","type","value","onChange","target","placeholder","required","onKeyDown","onClick","disabled","href"],"sources":["C:/Users/vaish/OneDrive/Documents/medbotsample/Frontned/src/components/Login.js"],"sourcesContent":["// src/components/Login.js\r\n\r\nimport axios from \"axios\";\r\nimport React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { login } from \"../authService\"; // Your custom login logic\r\nimport './Login.css'; // Your custom CSS file\r\nimport logo from '../components/logo.png'; // Path to your logo image\r\n\r\nconst Login = () => {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [loading, setLoading] = useState(false); // Loading state\r\n    const navigate = useNavigate();\r\n\r\n    const handleLogin = async (event) => {\r\n        event.preventDefault();\r\n        setError(\"\");\r\n        setLoading(true); // Set loading to true when login starts\r\n\r\n        try {\r\n            await login(email, password); // Assuming login is successful\r\n\r\n            // Call subscription check endpoint after successful login\r\n            const response = await axios.post('https://servermed-e9e8eubkhrbedcda.eastus2-01.azurewebsites.net/check-subscription', { email });\r\n            console.log(\"Subscription check response:\", response.data); // Debugging line\r\n            if (response.data.subscribed) {\r\n                navigate('/chatbot'); // Redirect to chat if subscription exists\r\n            } else {\r\n                navigate('/subscription'); // Redirect to subscription screen if not subscribed\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Login or subscription check failed:\", error); // Debugging line\r\n            if (error.response && error.response.status === 400) {\r\n                setError('Email is required.');\r\n            } else if (error.response && error.response.status === 500) {\r\n                setError('An internal server error occurred.');\r\n            } else {\r\n                setError('An error occurred: ' + error.message);\r\n            }\r\n        } finally {\r\n            setLoading(false); // Set loading to false when login completes\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (e) => {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault(); // Prevent default form submission\r\n            handleLogin(e); // Call handleLogin manually\r\n        }\r\n    };\r\n\r\n    const handleForgotPasswordClick = () => {\r\n        navigate(\"/forgot-password\"); // Navigate to Forgot Password page\r\n    };\r\n\r\n    const handleSubscribeNowClick = () => {\r\n        navigate('/subscription'); // Navigate to subscription page\r\n    };\r\n\r\n    return (\r\n        <div className=\"login-container\">\r\n            <div className=\"logo-container\">\r\n                <img src={logo} alt=\"Logo\" className=\"logo\" /> {/* Logo Image */}\r\n            </div>\r\n            <h1 className=\"header\">Sign in</h1>\r\n            <form onSubmit={handleLogin} className=\"login-form\">\r\n                <div className=\"input-group\">\r\n                    <label htmlFor=\"email\" className=\"form-label\">Email</label>\r\n                    <input\r\n                        id=\"email\"\r\n                        type=\"email\"\r\n                        value={email}\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                        placeholder=\"Email\"\r\n                        required\r\n                        aria-label=\"Email\"\r\n                        className=\"form-input\"\r\n                        onKeyDown={handleKeyDown} // Handle Enter key for this field\r\n                    />\r\n                </div>\r\n                <div className=\"input-group\">\r\n                    <label htmlFor=\"password\" className=\"form-label\">Password</label>\r\n                    <div className=\"password-container\">\r\n                        <input\r\n                            id=\"password\"\r\n                            type={showPassword ? \"text\" : \"password\"}\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            placeholder=\"Password\"\r\n                            required\r\n                            aria-label=\"Password\"\r\n                            className=\"form-input\"\r\n                            onKeyDown={handleKeyDown} // Handle Enter key for this field\r\n                        />\r\n                        <span\r\n                            className=\"password-toggle-icon\"\r\n                            onClick={() => setShowPassword(!showPassword)}\r\n                            aria-label={showPassword ? \"Hide password\" : \"Show password\"}\r\n                        >\r\n                            {showPassword ? '👁️' : '👁️‍🗨️'}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-options\">\r\n                    <label className=\"remember-me\">\r\n                        <input type=\"checkbox\" />\r\n                        Remember me\r\n                    </label>\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"forgot-password-link\"\r\n                        onClick={handleForgotPasswordClick} // Handle Forgot Password click\r\n                    >\r\n                        Forgot password?\r\n                    </button>\r\n                </div>\r\n                <button \r\n                    type=\"submit\" \r\n                    className=\"login-button\" \r\n                    disabled={loading}\r\n                >\r\n                    {loading ? \"Signing in...\" : \"Sign in\"} {/* Conditionally render button text */}\r\n                </button>\r\n                <button \r\n                    type=\"button\" \r\n                    className=\"subscribe-now-button\" \r\n                    onClick={handleSubscribeNowClick}\r\n                >\r\n                    Subscribe Now\r\n                </button>\r\n                <p className=\"signup-link\">\r\n                    Don’t have an account? <a href=\"/signup\">Sign up</a> {/* Changed from Link to anchor tag */}\r\n                </p>\r\n                {error && <p className=\"error-message\">{error}</p>}\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}